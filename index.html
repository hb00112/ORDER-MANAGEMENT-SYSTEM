<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Management System</title>
    <!-- Firebase SDKs -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
        import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDPA5tLm3H889inLZvh_uWAHOxGNhC0gLc",
            authDomain: "order-management-system-ea2d3.firebaseapp.com",
            databaseURL: "https://order-management-system-ea2d3-default-rtdb.firebaseio.com",
            projectId: "order-management-system-ea2d3",
            storageBucket: "order-management-system-ea2d3.appspot.com",
            messagingSenderId: "779242930925",
            appId: "1:779242930925:web:46d09278bedd87d6aac2e4",
            measurementId: "G-K0F1E6FY6C"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getDatabase(app);

        // Function to write data to Firebase
        function writeOrderData(orderId, partyName, item, color, size, quantity) {
            set(ref(db, 'orders/' + orderId), {
                partyName: partyName,
                item: item,
                color: color,
                size: size,
                quantity: quantity,
                status: "Pending"
            });
        }

        // Function to get data from Firebase
        function getOrderData() {
            const dbRef = ref(db);
            get(child(dbRef, `orders`)).then((snapshot) => {
                if (snapshot.exists()) {
                    console.log(snapshot.val());
                } else {
                    console.log("No data available");
                }
            }).catch((error) => {
                console.error(error);
            });
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            margin-bottom: 10px;
            border-bottom: 2px solid #ccc;
            padding-bottom: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        table, th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }

        button {
            padding: 8px 12px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        input[type="text"], select {
            padding: 8px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }
    </style>
</head>
<body>

    <!-- Orders Section -->
    <div class="section" id="orders-section">
        <h2>Orders</h2>
        <form id="orderForm">
            <label for="partyName">Party Name:</label>
            <input type="text" id="partyName" name="partyName" required>

            <label for="item">Item:</label>
            <input type="text" id="item" name="item" required>

            <label for="color">Color:</label>
            <input type="text" id="color" name="color" required>

            <label for="size">Size:</label>
            <input type="text" id="size" name="size" required>

            <label for="quantity">Quantity:</label>
            <input type="number" id="quantity" name="quantity" required>

            <button type="button" onclick="submitOrder()">Submit Order</button>
        </form>

        <h3>Order Summary</h3>
        <div id="orderSummary"></div>
    </div>

    <!-- Pending Orders Section -->
    <div class="section" id="pending-orders-section">
        <h2>Pending Orders</h2>
        <table id="pendingOrdersTable">
            <tr>
                <th>Order ID</th>
                <th>Party Name</th>
                <th>Item Details</th>
                <th>Actions</th>
            </tr>
            <!-- Sample Row -->
            <tr>
                <td>ORD001</td>
                <td>John Doe</td>
                <td>Item A - Red - M - 5 pcs</td>
                <td>
                    <button onclick="dispatchOrder('ORD001')">Dispatch</button>
                    <button onclick="revertOrder('ORD001')">Revert</button>
                    <button onclick="viewDetails('ORD001')">View Details</button>
                </td>
            </tr>
        </table>
    </div>

    <!-- Billing Section -->
    <div class="section" id="billing-section">
        <h2>Billing</h2>
        <table id="billingTable">
            <tr>
                <th>Party Name</th>
                <th>Item Details</th>
                <th>Action</th>
            </tr>
            <!-- Sample Row -->
            <tr>
                <td>John Doe</td>
                <td>Item A - Red - M - 5 pcs</td>
                <td><button onclick="markAsBilled('ORD001')">Mark as Billed</button></td>
            </tr>
        </table>
    </div>

    <!-- Sent Orders Section -->
    <div class="section" id="sent-orders-section">
        <h2>Sent Orders</h2>
        <ul>
            <li>ORD001 - John Doe - Item A - Red - M - 5 pcs (Dispatched)</li>
        </ul>
    </div>

    <script>
        // Example functions to handle order submission and display order summary
        function submitOrder() {
            const orderId = "ORD" + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            const partyName = document.getElementById('partyName').value;
            const item = document.getElementById('item').value;
            const color = document.getElementById('color').value;
            const size = document.getElementById('size').value;
            const quantity = document.getElementById('quantity').value;

            // Save order to Firebase
            writeOrderData(orderId, partyName, item, color, size, quantity);

            // Display summary
            const summary = `
                <p>Order ID: ${orderId}</p>
                <p>Party Name: ${partyName}</p>
                <p>Item: ${item}</p>
                <p>Color: ${color}</p>
                <p>Size: ${size}</p>
                <p>Quantity: ${quantity}</p>
            `;
            document.getElementById('orderSummary').innerHTML = summary;
        }

        // Placeholder functions for dispatch, revert, and view details
        function dispatchOrder(orderId) {
            alert("Dispatching order " + orderId);
        }

        function revertOrder(orderId) {
            alert("Reverting order " + orderId);
        }

        function viewDetails(orderId) {
            alert("Viewing details for order " + orderId);
        }

        function markAsBilled(orderId) {
            alert("Marking order " + orderId + " as billed");
        }
    </script>

</body>
</html>
